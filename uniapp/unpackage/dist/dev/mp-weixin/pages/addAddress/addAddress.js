(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/addAddress/addAddress"],{100:function(e,n,o){"use strict";(function(e,n){var t=o(4);o(26);t(o(25));var r=t(o(101));e.__webpack_require_UNI_MP_PLUGIN__=o,n(r.default)}).call(this,o(1)["default"],o(2)["createPage"])},101:function(e,n,o){"use strict";o.r(n);var t=o(102),r=o(104);for(var s in r)["default"].indexOf(s)<0&&function(e){o.d(n,e,(function(){return r[e]}))}(s);var u,i=o(32),c=Object(i["default"])(r["default"],t["render"],t["staticRenderFns"],!1,null,null,null,!1,t["components"],u);c.options.__file="pages/addAddress/addAddress.vue",n["default"]=c.exports},102:function(e,n,o){"use strict";o.r(n);var t=o(103);o.d(n,"render",(function(){return t["render"]})),o.d(n,"staticRenderFns",(function(){return t["staticRenderFns"]})),o.d(n,"recyclableRender",(function(){return t["recyclableRender"]})),o.d(n,"components",(function(){return t["components"]}))},103:function(e,n,o){"use strict";var t;o.r(n),o.d(n,"render",(function(){return r})),o.d(n,"staticRenderFns",(function(){return u})),o.d(n,"recyclableRender",(function(){return s})),o.d(n,"components",(function(){return t}));try{t={uniForms:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(o.bind(null,195))},uniFormsItem:function(){return Promise.all([o.e("common/vendor"),o.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item")]).then(o.bind(null,211))},uniEasyinput:function(){return o.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(o.bind(null,218))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c},s=!1,u=[];r._withStripped=!0},104:function(e,n,o){"use strict";o.r(n);var t=o(105),r=o.n(t);for(var s in t)["default"].indexOf(s)<0&&function(e){o.d(n,e,(function(){return t[e]}))}(s);n["default"]=r.a},105:function(e,n,o){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o={data:function(){return{user:e.getStorageSync("xm-user"),form:{},rules:{address:{rules:[{required:!0,errorMessage:"请填写地址"}]},user:{rules:[{required:!0,errorMessage:"请填写联系人"}]},phone:{rules:[{required:!0,errorMessage:"请填写联系方式"}]}}}},onLoad:function(e){var n=this,o=e.addressId||0;o>0&&this.$request.get("/address/selectById/"+o).then((function(e){n.form=e.data||{}})),this.form.address="address"},methods:{getCurrentLocation:function(){var n=this,o="VBrEBMYmKx0XNijqhBaOOIzCcjHvR1Ag";e.authorize({scope:"scope.userLocation",success:function(){e.getLocation({type:"gcj02",success:function(t){var r=t.latitude,s=t.longitude;console.log("获取的地理位置:",{latitude:r,longitude:s});var u="https://api.map.baidu.com/reverse_geocoding/v3/?ak=".concat(o,"&output=json&coordtype=wgs84ll&location=").concat(r,",").concat(s);console.log("请求百度地图API的URL:",u),e.request({url:u,success:function(o){if(console.log("百度地图API响应数据:",o),200===o.statusCode&&0===o.data.status){var t=o.data.result.formatted_address;console.log("解析出的地址:",t),n.form.address=t,console.log("更新后的地址:",n.form.address),n.$forceUpdate(),e.showToast({title:"定位成功",icon:"success"})}else console.error("百度地图API响应错误:",o.data),e.showToast({title:"获取位置失败",icon:"error"})},fail:function(n){console.error("调用百度地图API失败:",n),e.showToast({title:"定位失败，请稍后再试",icon:"error"})}})},fail:function(n){console.error("获取地理位置失败：",n),e.showToast({title:"获取地理位置失败",icon:"error"})}})},fail:function(){e.showModal({title:"授权失败",content:"需要获取您的位置，请前往设置打开权限",success:function(n){n.confirm&&e.openSetting()}})}})},saveAddress:function(){var n=this;this.$refs.formRef.validate().then((function(o){n.$request.request({method:n.form.id?"PUT":"POST",url:n.form.id?"/address/update":"/address/add",data:n.form}).then((function(n){"200"===n.code?(e.showToast({title:"操作成功"}),e.navigateBack()):e.showToast({icon:"error",title:n.msg})}))})).catch((function(e){console.log("err",e)}))}}};n.default=o}).call(this,o(2)["default"])}},[[100,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/addAddress/addAddress.js.map