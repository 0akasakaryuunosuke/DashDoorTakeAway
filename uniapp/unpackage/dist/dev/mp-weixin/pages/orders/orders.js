(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/orders/orders"],{45:function(e,n,t){"use strict";(function(e,n){var o=t(4);t(26);o(t(25));var r=o(t(46));e.__webpack_require_UNI_MP_PLUGIN__=t,n(r.default)}).call(this,t(1)["default"],t(2)["createPage"])},46:function(e,n,t){"use strict";t.r(n);var o=t(47),r=t(49);for(var s in r)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(s);t(51);var i,u=t(32),c=Object(u["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,"8a71bbb4",null,!1,o["components"],i);c.options.__file="pages/orders/orders.vue",n["default"]=c.exports},47:function(e,n,t){"use strict";t.r(n);var o=t(48);t.d(n,"render",(function(){return o["render"]})),t.d(n,"staticRenderFns",(function(){return o["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return o["recyclableRender"]})),t.d(n,"components",(function(){return o["components"]}))},48:function(e,n,t){"use strict";var o;t.r(n),t.d(n,"render",(function(){return r})),t.d(n,"staticRenderFns",(function(){return i})),t.d(n,"recyclableRender",(function(){return s})),t.d(n,"components",(function(){return o}));try{o={uniSegmentedControl:function(){return t.e("uni_modules/uni-segmented-control/components/uni-segmented-control/uni-segmented-control").then(t.bind(null,181))},uniIcons:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-icons/components/uni-icons/uni-icons")]).then(t.bind(null,173))},uniTag:function(){return t.e("uni_modules/uni-tag/components/uni-tag/uni-tag").then(t.bind(null,188))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var e=this,n=e.$createElement;e._self._c},s=!1,i=[];r._withStripped=!0},49:function(e,n,t){"use strict";t.r(n);var o=t(50),r=t.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=r.a},50:function(e,n,t){"use strict";(function(e){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var t={data:function(){return{current:0,items:["全部","进行中","待评价","已退款"],ordersList:[],user:e.getStorageSync("xm-user"),businessQrCodeUrl:"",imagePopupVisible:!1,imageUrl:""}},onShow:function(){this.loadOrders()},methods:{goComment:function(n){e.navigateTo({url:"/pages/comment/comment?orderId="+n})},goOrdersItem:function(n){e.navigateTo({url:"/pages/ordersItem/ordersItem?orderId="+n})},del:function(n){var t=this;this.$request.del("/orders/delete/"+n).then((function(n){"200"===n.code?(e.showToast({icon:"success",title:"操作成功"}),t.loadOrders()):e.showToast({icon:"error",title:n.msg})}))},changeStatus:function(n,t){var o=this,r=JSON.parse(JSON.stringify(n));r.status=t,this.$request.put("/orders/update",r).then((function(t){"200"===t.code?(e.showToast({icon:"success",title:"操作成功"}),o.loadOrders(),o.loadBusinessInfo(n.businessId)):e.showToast({icon:"error",title:t.msg})}))},loadOrders:function(){var e=this,n="全部";switch(this.current){case 0:n="全部";break;case 1:n="进行中";break;case 2:n="待评价";break;case 3:n="已退款";break}this.$request.get("/orders/selectAll",{userId:this.user.id,status:n}).then((function(n){e.ordersList=n.data||[]}))},onClickItem:function(e){this.current!=e.currentIndex&&(this.current=e.currentIndex,this.loadOrders())},loadBusinessInfo:function(n){var t=this;console.log(n),this.$request.get("/business/selectById/".concat(n)).then((function(n){"200"===n.code?(t.businessQrCodeUrl=n.data.paycode,console.log(t.businessQrCodeUrl),t.showQrCodePopup()):e.showToast({icon:"error",title:"获取商家二维码失败"})}))},showQrCodePopup:function(){this.imageUrl=this.businessQrCodeUrl,console.log("s"),this.imagePopupVisible=!0},closeImagePopup:function(){this.imagePopupVisible=!1}}};n.default=t}).call(this,t(2)["default"])},51:function(e,n,t){"use strict";t.r(n);var o=t(52),r=t.n(o);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);n["default"]=r.a},52:function(e,n,t){}},[[45,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/orders/orders.js.map